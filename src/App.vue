<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted,nextTick } from 'vue';

import { Swiper, SwiperSlide } from 'swiper/vue';
import { Pagination } from 'swiper/modules';
import type { Swiper as SwiperType } from 'swiper/types';
import 'swiper/css';
import 'swiper/css/pagination';

//开启/关闭菜单
const isMenuOpen = ref(false);
//开启/关闭自动播放
const isAutoPlayEnabled = ref(true);
//媒体资源列表
const mediaItems = ref([
  { 
    //图片路径
    imageSrc: new URL('./assets/media/1.webp', import.meta.url).href,
    //视频路径
    videoSrc: new URL('./assets/media/1.mp4', import.meta.url).href,
  },
  { 
    imageSrc: new URL('./assets/media/2.webp', import.meta.url).href,
    videoSrc: new URL('./assets/media/2.mp4', import.meta.url).href,
  },
]);

//swiper模块列表
const modules = [Pagination];
//当前展示的媒体索引
const currentMediaIndex = ref(0);
//当前正在播放的视频索引
const currentPlayingIndex = ref<number | null>(0);
//需要重播的视频索引
const replayTargetIndex = ref<number | null>(null);
//视频对象
const videoRefs = ref<(HTMLVideoElement | null)[]>([]);
//swiper实例
const swiperInstance = ref<SwiperType | null>(null);
//视频加载状态
const videoLoadStatus = ref<{ [key: number]: 'idle' | 'loading' | 'loaded' | 'error' }>({});
//重播控制器
let replayAbortController: AbortController | null = null;
//用户是否已经与轮播交互过
const userHasInteracted = ref<boolean>(false);
//当前 Swiper 显示的卡片索引
const currentSlideIndex = ref<number>(0);
//记录视频是否已播放完成
const videoEndedState = ref<{ [key: number]: boolean }>({});

//显示与隐藏视频和图片
const shouldShowVideo = (index: number): boolean => {
  // 1. 必须是当前显示的卡片
  if (index !== currentSlideIndex.value) {
    return false;
  }
  // 2. 用户必须已交互
  if (!userHasInteracted.value) {
    return false;
  }
  // 3. 自动播放必须开启 (规则 1, 2)
  if (!isAutoPlayEnabled.value) {
    return false;
  }
  // 4. 视频加载必须成功
  if (videoLoadStatus.value[index] === 'error') {
    return false;
  }
  // 5. 视频尚未播放完成 (规则 1, 2, 3)
  // 如果视频已经播放结束，即使自动播放开启，也应该显示图片
  return !videoEndedState.value[index];
};

//用户交互
const onUserInteraction = () => {
  if (!userHasInteracted.value) {
    userHasInteracted.value = true; // 标记用户已交互
    // 用户交互后，如果自动播放开启，尝试播放当前卡片视频
    tryPlayCurrentVideo();
  }
};

//视频播放
const tryPlayCurrentVideo = async () => {
  //用户未交互或者未开启自动播放
  if (!userHasInteracted.value || !isAutoPlayEnabled.value) {
    return; // 不满足播放条件
  }

  const index = currentSlideIndex.value;
  const videoEl = videoRefs.value[index];

  if (videoEl) {
    try {
      await videoEl.play();
    } catch (e) {
      console.error(`Failed to play video at index ${index}:`, e);
    }
  }
};

//swiper组件初始化
const onSwiperInit = (swiper: SwiperType) => {
  swiperInstance.value = swiper;
  currentSlideIndex.value = swiper.realIndex; // 初始化当前索引
  // 初始化加载状态和结束状态
  mediaItems.value.forEach((_, i) => {
    videoLoadStatus.value[i] = 'idle';
    videoEndedState.value[i] = false;
  });

  // 如果用户已交互（例如页面加载后快速点击）且自动播放开启，则尝试播放
  if (userHasInteracted.value && isAutoPlayEnabled.value) {
    tryPlayCurrentVideo();
  }
};

const onSlideTransitionStart = (swiper:any) => {
  currentMediaIndex.value = swiper?.realIndex || 0;
};

//swiper切换事件
const onSlideChange = (swiper: SwiperType) => {
  const previousIndex = currentSlideIndex.value;
  currentSlideIndex.value = swiper.realIndex;

  //卡片切换时，停止前一个视频
  const previousVideoEl = videoRefs.value[previousIndex];
  if (previousVideoEl) {
    previousVideoEl.pause();
    // 重置到开头，以便下次播放
    previousVideoEl.currentTime = 0;
  }
  // 清除前一个视频的结束状态
  videoEndedState.value[previousIndex] = false;

  // 如果用户已交互且自动播放开启，则尝试播放新幻灯片的视频
  if (userHasInteracted.value && isAutoPlayEnabled.value) {
    tryPlayCurrentVideo();
  }
    
  if(isMenuOpen.value){
    isMenuOpen.value = false;
  }
};

const onVideoCanPlay = (index: number) => {
  videoLoadStatus.value[index] = 'loaded';
};

const onVideoError = (index: number) => {
  videoLoadStatus.value[index] = 'error';
  if (replayTargetIndex.value === index) {
      replayTargetIndex.value = null;
  }
};

//视频播放结束
const onVideoEnded = (index: number) => {
  videoEndedState.value[index] = true;
};

//视频重播
const replayCurrentMedia = async () => {
  // 1. 取消任何正在进行的重播
  if (replayAbortController) {
    replayAbortController.abort();
  }
  replayAbortController = new AbortController();
  const controllerSignal = replayAbortController.signal;

  const index = currentSlideIndex.value;
  const videoEl = videoRefs.value[index];

  if (!videoEl) {
    return;
  }

  if (videoLoadStatus.value[index] === 'error') {
    return;
  }

  userHasInteracted.value = true; // 强制标记用户已交互

  videoEl.currentTime = 0;
  videoEndedState.value[index] = false; // 清除结束标志

  try {
    await videoEl.play();
  } catch (e) {
    if (controllerSignal.aborted) {
      console.log("Replay attempt was aborted.");
    } else {
      console.error(`Failed to replay video at index ${index} via button click:`, e);
    }
  }
};


const toggleMenu = () => {
  isMenuOpen.value = !isMenuOpen.value;
};

const handleCloseMenu = (event: MouseEvent) => {
  const menuToggle = document.querySelector('.menu-toggle');
  const menu = document.querySelector('.menu');
  if (
    isMenuOpen.value &&
    menu &&
    !menu.contains(event.target as Node) &&
    menuToggle &&
    !menuToggle.contains(event.target as Node)
  ) {
    isMenuOpen.value = false;
  }
};

//自动播放开启/关闭
const toggleAutoPlay = () => {
  const wasEnabled = isAutoPlayEnabled.value;
  isAutoPlayEnabled.value = !isAutoPlayEnabled.value;

  if (!isAutoPlayEnabled.value) {
    // 关闭自动播放 -> 停止当前视频，显示图片
    const currentIndex = currentSlideIndex.value;
    // 修正：使用数组方式获取视频元素，并进行类型检查
    const videoEl = videoRefs.value[currentIndex];
    if (videoEl) {
      videoEl.pause();
      videoEl.currentTime = 0;
    }
    // 不清除 videoEndedState，因为切换回来时 shouldShowVideo 会重新评估
  } else if (!wasEnabled && userHasInteracted.value) { // 从关闭变为开启
    // 开启自动播放 -> 如果用户已交互，尝试播放当前视频
    tryPlayCurrentVideo();
  }
};

onMounted(() => {
  document.addEventListener('click', handleCloseMenu);
  mediaItems.value.forEach((_, i) => {
    videoLoadStatus.value[i] = 'idle';
  });
});

onUnmounted(() => {
  document.removeEventListener('click', handleCloseMenu);
  // 组件卸载时清理控制器
  if (replayAbortController) {
    replayAbortController.abort();
  }
  videoRefs.value.forEach(video => {
    if (video) {
      video.pause();
    }
  });
});
</script>

<template>
  <div class="main-container" :class="[currentMediaIndex === 0 ? 'main-container1' : 'main-container2']">
    <div class=text-top>2026</div>
    <swiper 
      class="my-swiper" 
      :pagination="{ clickable: true }"
      :modules="modules" 
      loop
      :space-between="0"
      @slideChangeTransitionEnd="onSlideChange"
      @slideChangeTransitionStart="onSlideTransitionStart"
      @touch-start="onUserInteraction"
      @click="onUserInteraction"
      @init="onSwiperInit"
    >
      <swiper-slide class="swiper-slide" v-for="(item, index) in mediaItems" :key="index">
        <img 
          alt="heka"
          class="media-item"
          v-show="!shouldShowVideo(index)"
          :src="item.imageSrc"
        />
        <video  
          autoplay
          muted
          ref="videoRefs"
          class="media-item"
          playsinline
          webkit-playsinline 
          x5-playsinline 
          x5-video-player-type="h5"
          x5-video-orientation="portraint"
          preload="auto"
          v-show="shouldShowVideo(index)"
          :src="item.videoSrc"
          @ended="onVideoEnded(index)"
          @canplay="onVideoCanPlay(index)"
          @error="onVideoError(index)"
        ></video>
      </swiper-slide>
    </swiper>
    <div class=text-bottom>新年快樂</div>
  </div>
  <div @click="toggleMenu" class="menu-toggle">
    <div class="menu-toggle-control">
      <span class="menu-toggle-icon" v-if="isAutoPlayEnabled">
        <svg class="icon" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M526.49882864 364.2931832c-74.8243121 0-135.66761086 60.84329876-135.66761086 135.66761088s60.84329876 135.66761086 135.66761086 135.66761086S662.1664395 574.78510617 662.1664395 499.96079408s-60.97275259-135.66761086-135.66761086-135.66761088z m0 211.78646125c-41.94304 0-76.11885037-34.17581037-76.11885037-76.11885037s34.17581037-76.11885037 76.11885037-76.11885038 76.11885037 34.17581037 76.11885038 76.11885038-34.17581037 76.11885037-76.11885038 76.11885037z" fill="#FF2C2C"></path><path d="M526.49882864 239.88805531c-143.4348405 0-260.07273876 116.63789827-260.07273877 260.07273877s116.63789827 260.07273876 260.07273877 260.07273875 260.07273876-116.63789827 260.07273877-260.07273875S669.93366914 239.88805531 526.49882864 239.88805531z m0 480.53260642c-121.5571437 0-220.45986765-98.90272395-220.45986766-220.45986765s98.90272395-220.45986765 220.45986766-220.45986766 220.45986765 98.90272395 220.45986766 220.45986766S648.05597235 720.42066173 526.49882864 720.42066173zM526.49882864 183.96400197c13.46319803 0 24.3373195-10.87412148 24.33731951-24.3373195s-10.87412148-24.3373195-24.33731951-24.3373195-24.3373195 10.87412148-24.3373195 24.3373195 10.87412148 24.3373195 24.3373195 24.3373195zM460.73628445 190.82505482c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820346-2.84798419-13.07483653-15.66391309-21.48933531-28.86820347-18.77080494-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820345s15.79336691 21.61878914 28.86820347 18.77080495zM397.95117827 211.2787595c12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454913-5.43706075-12.29811358-19.80643555-17.73517431-32.10454913-12.29811357-12.29811358 5.43706075-17.73517431 19.80643555-12.29811358 32.10454912 5.43706075 12.16865975 19.80643555 17.73517431 32.10454913 12.29811358zM340.73258667 244.28948543c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690271-7.89668347-10.87412148-23.04278124-13.33374419-33.91690272-5.43706075-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272 7.89668347 10.87412148 23.04278124 13.33374419 33.91690272 5.43706074zM291.66958617 288.4332405c8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235357-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.30526421 9.96794469 9.0617679 25.37295013 8.28504494 34.3052642-1.81235358zM219.56380445 350.82998518c11.65084445 6.73159902 26.53803457 2.71853037 33.26963358-8.93231407 6.73159902-11.65084445 2.71853037-26.53803457-8.93231408-33.26963358-11.65084445-6.73159902-26.53803457-2.71853037-33.26963358 8.93231408-6.60214518 11.65084445-2.58907653 26.53803457 8.93231408 33.26963357zM195.35593876 417.88706765c12.81592889 4.14252247 26.53803457-2.84798419 30.68055705-15.66391308 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055704-12.81592889-4.14252247-26.53803457 2.84798419-30.68055703 15.66391308-4.14252247 12.81592889 2.84798419 26.53803457 15.66391307 30.68055704zM185.5174479 488.56885728c13.33374419 1.4239921 25.37295013-8.28504494 26.6674884-21.61878913 1.4239921-13.33374419-8.28504494-25.37295013-21.61878913-26.6674884-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.20429037 8.28504494 25.2434963 21.61878914 26.66748839zM212.1849363 532.97152c-1.4239921-13.33374419-13.33374419-23.04278124-26.6674884-21.61878914-13.33374419 1.4239921-23.04278124 13.33374419-21.61878914 26.66748839 1.4239921 13.33374419 13.33374419 23.04278124 26.66748841 21.61878914 13.33374419-1.4239921 23.04278124-13.33374419 21.61878913-26.66748839zM226.03649581 597.56897975c-4.14252247-12.81592889-17.86462815-19.80643555-30.68055705-15.66391308-12.81592889 4.14252247-19.80643555 17.86462815-15.66391307 30.68055703 4.14252247 12.81592889 17.86462815 19.80643555 30.68055703 15.6639131 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055705zM252.83343803 657.8944632c-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231406-11.65084445 6.73159902-15.66391309 21.61878914-8.93231408 33.26963358 6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231408 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.2696336zM257.36432197 709.54654025c-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 9.96794469 24.3373195 10.74466765 34.3052642 1.81235358 9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.3052642-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235358zM306.81568395 760.93970963c-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690272 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074 7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706074zM397.95117827 788.64282864c-12.29811358-5.43706075-26.66748839 0-32.10454913 12.29811358-5.43706075 12.29811358 0 26.66748839 12.29811358 32.10454914 12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.56651457-12.29811358 0-26.66748839-12.29811358-32.10454914zM460.73628445 808.9670795c-13.07483653-2.84798419-26.02021925 5.56651457-28.86820347 18.77080495s5.56651457 26.02021925 18.77080494 28.86820345c13.07483653 2.84798419 26.02021925-5.56651457 28.86820347-18.77080493 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820347zM526.49882864 815.95758617c-13.46319803 0-24.3373195 10.87412148-24.3373195 24.33731952s10.87412148 24.3373195 24.3373195 24.33731949S550.83614815 853.7581037 550.83614815 840.29490569s-10.87412148-24.3373195-24.33731951-24.33731952zM592.13191902 808.9670795c-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820347s15.66391309 21.48933531 28.86820345 18.77080493c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820345-2.71853037-13.20429037-15.66391309-21.48933531-28.86820345-18.77080495zM655.04647902 788.64282864c-12.29811358 5.43706075-17.73517431 19.80643555-12.29811359 32.10454914 5.43706075 12.29811358 19.80643555 17.73517431 32.10454914 12.29811358 12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454914-5.56651457-12.29811358-19.93588939-17.86462815-32.10454913-12.29811358zM712.26507061 755.50264889c-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272s23.04278124 13.33374419 33.91690272 5.43706074c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690272s-23.04278124-13.33374419-33.91690272-5.43706074zM761.32807111 711.35889383c-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.3052642 9.96794469 8.93231408 25.37295013 8.15559111 34.3052642-1.81235358 8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235358zM833.30439902 648.96214914c-11.65084445-6.73159902-26.53803457-2.71853037-33.26963359 8.93231406-6.73159902 11.65084445-2.71853037 26.53803457 8.93231407 33.2696336 11.65084445 6.73159902 26.53803457 2.71853037 33.26963359-8.93231408 6.73159902-11.65084445 2.71853037-26.53803457-8.93231407-33.26963358zM857.64171852 581.90506667c-12.81592889-4.14252247-26.53803457 2.84798419-30.68055704 15.66391308-4.14252247 12.81592889 2.84798419 26.53803457 15.66391309 30.68055705 12.81592889 4.14252247 26.53803457-2.84798419 30.68055704-15.6639131 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055703zM867.48020939 511.35273086c-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.33374419 8.28504494 25.37295013 21.61878915 26.66748839 13.33374419 1.4239921 25.37295013-8.28504494 26.66748839-21.61878914 1.4239921-13.33374419-8.28504494-25.2434963-21.61878913-26.66748839zM840.68326717 466.95006815c1.4239921 13.33374419 13.33374419 23.04278124 26.66748838 21.61878913s23.04278124-13.33374419 21.61878914-26.66748839c-1.4239921-13.33374419-13.33374419-23.04278124-26.66748839-21.61878914-13.33374419 1.29453827-22.91332741 13.20429037-21.61878913 26.6674884zM826.96116148 402.22315457c4.14252247 12.81592889 17.86462815 19.80643555 30.68055704 15.66391308 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055704-4.14252247-12.81592889-17.86462815-19.80643555-30.68055704-15.66391308-12.81592889 4.2719763-19.80643555 17.99408197-15.66391309 30.68055704zM800.16421925 341.89767111c6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231407 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.26963357-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231408-11.65084445 6.86105283-15.66391309 21.61878914-8.93231408 33.26963358zM795.63333531 290.24559408c9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.30526421-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235357-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 10.09739852 24.3373195 10.87412148 34.3052642 1.81235358zM746.18197333 238.85242469c7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706075-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690271 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074zM655.04647902 211.2787595c12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.43706075-12.29811358 0-26.66748839-12.29811358-32.10454912-12.29811358-5.43706075-26.66748839 0-32.10454914 12.29811357-5.56651457 12.29811358 0 26.66748839 12.29811359 32.10454913zM592.13191902 190.82505482c13.07483653 2.84798419 26.02021925-5.56651457 28.86820345-18.77080495 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820345s-26.02021925 5.56651457-28.86820345 18.77080494c-2.71853037 13.20429037 5.69596839 26.14967309 18.77080494 28.86820346z" fill="#FF2C2C"></path></svg>
      </span>
      <span class="menu-toggle-icon" v-else>
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" style="width: 1em; height: 1em; vertical-align: middle; fill: currentcolor; overflow: hidden;">
          <line 
            x1="100" y1="100"
            x2="924" y2="924"
            stroke="#FF2C2C" 
            stroke-width="40"
            stroke-linecap="round"
            stroke-opacity="1"
            data-v-7a7a37b1=""
          ></line>
          <path d="M526.49882864 364.2931832c-74.8243121 0-135.66761086 60.84329876-135.66761086 135.66761088s60.84329876 135.66761086 135.66761086 135.66761086S662.1664395 574.78510617 662.1664395 499.96079408s-60.97275259-135.66761086-135.66761086-135.66761088z m0 211.78646125c-41.94304 0-76.11885037-34.17581037-76.11885037-76.11885037s34.17581037-76.11885037 76.11885037-76.11885038 76.11885037 34.17581037 76.11885038 76.11885038-34.17581037 76.11885037-76.11885038 76.11885037z" fill="#FF2C2C"></path>
          <path d="M526.49882864 239.88805531c-143.4348405 0-260.07273876 116.63789827-260.07273877 260.07273877s116.63789827 260.07273876 260.07273877 260.07273875 260.07273876-116.63789827 260.07273877-260.07273875S669.93366914 239.88805531 526.49882864 239.88805531z m0 480.53260642c-121.5571437 0-220.45986765-98.90272395-220.45986766-220.45986765s98.90272395-220.45986765 220.45986766-220.45986766 220.45986765 98.90272395 220.45986766 220.45986766S648.05597235 720.42066173 526.49882864 720.42066173zM526.49882864 183.96400197c13.46319803 0 24.3373195-10.87412148 24.33731951-24.3373195s-10.87412148-24.3373195-24.33731951-24.3373195-24.3373195 10.87412148-24.3373195 24.3373195 10.87412148 24.3373195 24.3373195 24.3373195zM460.73628445 190.82505482c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820346-2.84798419-13.07483653-15.66391309-21.48933531-28.86820347-18.77080494-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820345s15.79336691 21.61878914 28.86820347 18.77080495zM397.95117827 211.2787595c12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454913-5.43706075-12.29811358-19.80643555-17.73517431-32.10454913-12.29811357-12.29811358 5.43706075-17.73517431 19.80643555-12.29811358 32.10454912 5.43706075 12.16865975 19.80643555 17.73517431 32.10454913 12.29811358zM340.73258667 244.28948543c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690271-7.89668347-10.87412148-23.04278124-13.33374419-33.91690272-5.43706075-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272 7.89668347 10.87412148 23.04278124 13.33374419 33.91690272 5.43706074zM291.66958617 288.4332405c8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235357-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.30526421 9.96794469 9.0617679 25.37295013 8.28504494 34.3052642-1.81235358zM219.56380445 350.82998518c11.65084445 6.73159902 26.53803457 2.71853037 33.26963358-8.93231407 6.73159902-11.65084445 2.71853037-26.53803457-8.93231408-33.26963358-11.65084445-6.73159902-26.53803457-2.71853037-33.26963358 8.93231408-6.60214518 11.65084445-2.58907653 26.53803457 8.93231408 33.26963357zM195.35593876 417.88706765c12.81592889 4.14252247 26.53803457-2.84798419 30.68055705-15.66391308 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055704-12.81592889-4.14252247-26.53803457 2.84798419-30.68055703 15.66391308-4.14252247 12.81592889 2.84798419 26.53803457 15.66391307 30.68055704zM185.5174479 488.56885728c13.33374419 1.4239921 25.37295013-8.28504494 26.6674884-21.61878913 1.4239921-13.33374419-8.28504494-25.37295013-21.61878913-26.6674884-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.20429037 8.28504494 25.2434963 21.61878914 26.66748839zM212.1849363 532.97152c-1.4239921-13.33374419-13.33374419-23.04278124-26.6674884-21.61878914-13.33374419 1.4239921-23.04278124 13.33374419-21.61878914 26.66748839 1.4239921 13.33374419 13.33374419 23.04278124 26.66748841 21.61878914 13.33374419-1.4239921 23.04278124-13.33374419 21.61878913-26.66748839zM226.03649581 597.56897975c-4.14252247-12.81592889-17.86462815-19.80643555-30.68055705-15.66391308-12.81592889 4.14252247-19.80643555 17.86462815-15.66391307 30.68055703 4.14252247 12.81592889 17.86462815 19.80643555 30.68055703 15.6639131 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055705zM252.83343803 657.8944632c-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231406-11.65084445 6.73159902-15.66391309 21.61878914-8.93231408 33.26963358 6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231408 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.2696336zM257.36432197 709.54654025c-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 9.96794469 24.3373195 10.74466765 34.3052642 1.81235358 9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.3052642-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235358zM306.81568395 760.93970963c-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690272 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074 7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706074zM397.95117827 788.64282864c-12.29811358-5.43706075-26.66748839 0-32.10454913 12.29811358-5.43706075 12.29811358 0 26.66748839 12.29811358 32.10454914 12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.56651457-12.29811358 0-26.66748839-12.29811358-32.10454914zM460.73628445 808.9670795c-13.07483653-2.84798419-26.02021925 5.56651457-28.86820347 18.77080495s5.56651457 26.02021925 18.77080494 28.86820345c13.07483653 2.84798419 26.02021925-5.56651457 28.86820347-18.77080493 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820347zM526.49882864 815.95758617c-13.46319803 0-24.3373195 10.87412148-24.3373195 24.33731952s10.87412148 24.3373195 24.3373195 24.33731949S550.83614815 853.7581037 550.83614815 840.29490569s-10.87412148-24.3373195-24.33731951-24.33731952zM592.13191902 808.9670795c-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820347s15.66391309 21.48933531 28.86820345 18.77080493c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820345-2.71853037-13.20429037-15.66391309-21.48933531-28.86820345-18.77080495zM655.04647902 788.64282864c-12.29811358 5.43706075-17.73517431 19.80643555-12.29811359 32.10454914 5.43706075 12.29811358 19.80643555 17.73517431 32.10454914 12.29811358 12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454914-5.56651457-12.29811358-19.93588939-17.86462815-32.10454913-12.29811358zM712.26507061 755.50264889c-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272s23.04278124 13.33374419 33.91690272 5.43706074c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690272s-23.04278124-13.33374419-33.91690272-5.43706074zM761.32807111 711.35889383c-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.3052642 9.96794469 8.93231408 25.37295013 8.15559111 34.3052642-1.81235358 8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235358zM833.30439902 648.96214914c-11.65084445-6.73159902-26.53803457-2.71853037-33.26963359 8.93231406-6.73159902 11.65084445-2.71853037 26.53803457 8.93231407 33.2696336 11.65084445 6.73159902 26.53803457 2.71853037 33.26963359-8.93231408 6.73159902-11.65084445 2.71853037-26.53803457-8.93231407-33.26963358zM857.64171852 581.90506667c-12.81592889-4.14252247-26.53803457 2.84798419-30.68055704 15.66391308-4.14252247-12.81592889 2.84798419-26.53803457 15.66391309 30.68055705 12.81592889 4.14252247 26.53803457-2.84798419 30.68055704-15.6639131 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055703zM867.48020939 511.35273086c-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.33374419 8.28504494 25.37295013 21.61878915 26.66748839 13.33374419 1.4239921 25.37295013-8.28504494 26.66748839-21.61878914 1.4239921-13.33374419-8.28504494-25.2434963-21.61878913-26.66748839zM840.68326717 466.95006815c1.4239921 13.33374419 13.33374419 23.04278124 26.66748838 21.61878913s23.04278124-13.33374419 21.61878914-26.66748839c-1.4239921-13.33374419-13.33374419-23.04278124-26.66748839-21.61878914-13.33374419 1.29453827-22.91332741 13.20429037-21.61878913 26.6674884zM826.96116148 402.22315457c4.14252247 12.81592889 17.86462815 19.80643555 30.68055704 15.66391308 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055704-4.14252247-12.81592889-17.86462815-19.80643555-30.68055704-15.66391308-12.81592889 4.2719763-19.80643555 17.99408197-15.66391309 30.68055704zM800.16421925 341.89767111c6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231407 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.26963357-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231408-11.65084445 6.86105283-15.66391309 21.61878914-8.93231408 33.26963358zM795.63333531 290.24559408c9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.30526421-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235357-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 10.09739852 24.3373195 10.87412148 34.3052642 1.81235358zM746.18197333 238.85242469c7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706075-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690271 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074zM655.04647902 211.2787595c12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.43706075-12.29811358 0-26.66748839-12.29811358-32.10454912-12.29811358-5.43706075-26.66748839 0-32.10454914 12.29811357-5.56651457 12.29811358 0 26.66748839 12.29811359 32.10454913zM592.13191902 190.82505482c13.07483653 2.84798419 26.02021925-5.56651457 28.86820345-18.77080495 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820345s-26.02021925 5.56651457-28.86820345 18.77080494c-2.71853037 13.20429037 5.69596839 26.14967309 18.77080494 28.86820346z" fill="#FF2C2C"></path>
        </svg>
      </span>
      <span class="menu-toggle-text">LIVE</span>
      <span class="menu-toggle-icon" v-if="isMenuOpen">
        <svg class="icon" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512 693.333333c-14.933333 0-29.866667-4.266667-40.533333-14.933333l-277.33333399-234.666667c-27.733333-23.466667-29.866667-64-8.53333301-89.6 23.466667-27.733333 64-29.866667 89.6-8.53333299L512 546.133333l236.8-200.53333299c27.733333-23.466667 68.266667-19.19999999 89.6 8.53333299 23.466667 27.733333 19.19999999 68.266667-8.53333301 89.6l-277.33333399 234.666667c-10.666667 10.666667-25.6 14.933333-40.533333 14.933333z" fill="#808080"></path></svg>
      </span>
      <span class="menu-toggle-icon" v-else>
        <svg class="icon" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512 330.666667c14.933333 0 29.866667 4.266667 40.533333 14.933333l277.33333399 234.666667c27.733333 23.466667 29.866667 64 8.53333301 89.6-23.466667 27.733333-64 29.866667-89.6 8.53333299L512 477.866667l-236.8 200.53333299c-27.733333 23.466667-68.266667 19.19999999-89.6-8.53333299-23.466667-27.733333-19.19999999-68.266667 8.53333301-89.6l277.33333399-234.666667c10.666667-10.666667 25.6-14.933333 40.533333-14.933333z" fill="#808080"></path></svg>
      </span>
    </div>
  </div>
  <div :class="{ menu: true, open: isMenuOpen }">
    <div @click="toggleAutoPlay" class="menu-item">
      <span class="menu-toggle-icon" v-if="!isAutoPlayEnabled">
        <svg class="icon" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M526.49882864 364.2931832c-74.8243121 0-135.66761086 60.84329876-135.66761086 135.66761088s60.84329876 135.66761086 135.66761086 135.66761086S662.1664395 574.78510617 662.1664395 499.96079408s-60.97275259-135.66761086-135.66761086-135.66761088z m0 211.78646125c-41.94304 0-76.11885037-34.17581037-76.11885037-76.11885037s34.17581037-76.11885037 76.11885037-76.11885038 76.11885037 34.17581037 76.11885038 76.11885038-34.17581037 76.11885037-76.11885038 76.11885037z" fill="#808080"></path><path d="M526.49882864 239.88805531c-143.4348405 0-260.07273876 116.63789827-260.07273877 260.07273877s116.63789827 260.07273876 260.07273877 260.07273875 260.07273876-116.63789827 260.07273877-260.07273875S669.93366914 239.88805531 526.49882864 239.88805531z m0 480.53260642c-121.5571437 0-220.45986765-98.90272395-220.45986766-220.45986765s98.90272395-220.45986765 220.45986766-220.45986766 220.45986765 98.90272395 220.45986766 220.45986766S648.05597235 720.42066173 526.49882864 720.42066173zM526.49882864 183.96400197c13.46319803 0 24.3373195-10.87412148 24.33731951-24.3373195s-10.87412148-24.3373195-24.33731951-24.3373195-24.3373195 10.87412148-24.3373195 24.3373195 10.87412148 24.3373195 24.3373195 24.3373195zM460.73628445 190.82505482c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820346-2.84798419-13.07483653-15.66391309-21.48933531-28.86820347-18.77080494-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820345s15.79336691 21.61878914 28.86820347 18.77080495zM397.95117827 211.2787595c12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454913-5.43706075-12.29811358-19.80643555-17.73517431-32.10454913-12.29811357-12.29811358 5.43706075-17.73517431 19.80643555-12.29811358 32.10454912 5.43706075 12.16865975 19.80643555 17.73517431 32.10454913 12.29811358zM340.73258667 244.28948543c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690271-7.89668347-10.87412148-23.04278124-13.33374419-33.91690272-5.43706075-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272 7.89668347 10.87412148 23.04278124 13.33374419 33.91690272 5.43706074zM291.66958617 288.4332405c8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235357-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.30526421 9.96794469 9.0617679 25.37295013 8.28504494 34.3052642-1.81235358zM219.56380445 350.82998518c11.65084445 6.73159902 26.53803457 2.71853037 33.26963358-8.93231407 6.73159902-11.65084445 2.71853037-26.53803457-8.93231408-33.26963358-11.65084445-6.73159902-26.53803457-2.71853037-33.26963358 8.93231408-6.60214518 11.65084445-2.58907653 26.53803457 8.93231408 33.26963357zM195.35593876 417.88706765c12.81592889 4.14252247 26.53803457-2.84798419 30.68055705-15.66391308 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055704-12.81592889-4.14252247-26.53803457 2.84798419-30.68055703 15.66391308-4.14252247 12.81592889 2.84798419 26.53803457 15.66391307 30.68055704zM185.5174479 488.56885728c13.33374419 1.4239921 25.37295013-8.28504494 26.6674884-21.61878913 1.4239921-13.33374419-8.28504494-25.37295013-21.61878913-26.6674884-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.20429037 8.28504494 25.2434963 21.61878914 26.66748839zM212.1849363 532.97152c-1.4239921-13.33374419-13.33374419-23.04278124-26.6674884-21.61878914-13.33374419 1.4239921-23.04278124 13.33374419-21.61878914 26.66748839 1.4239921 13.33374419 13.33374419 23.04278124 26.66748841 21.61878914 13.33374419-1.4239921 23.04278124-13.33374419 21.61878913-26.66748839zM226.03649581 597.56897975c-4.14252247-12.81592889-17.86462815-19.80643555-30.68055705-15.66391308-12.81592889 4.14252247-19.80643555 17.86462815-15.66391307 30.68055703 4.14252247 12.81592889 17.86462815 19.80643555 30.68055703 15.6639131 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055705zM252.83343803 657.8944632c-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231406-11.65084445 6.73159902-15.66391309 21.61878914-8.93231408 33.26963358 6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231408 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.2696336zM257.36432197 709.54654025c-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 9.96794469 24.3373195 10.74466765 34.3052642 1.81235358 9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.3052642-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235358zM306.81568395 760.93970963c-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690272 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074 7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706074zM397.95117827 788.64282864c-12.29811358-5.43706075-26.66748839 0-32.10454913 12.29811358-5.43706075 12.29811358 0 26.66748839 12.29811358 32.10454914 12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.56651457-12.29811358 0-26.66748839-12.29811358-32.10454914zM460.73628445 808.9670795c-13.07483653-2.84798419-26.02021925 5.56651457-28.86820347 18.77080495s5.56651457 26.02021925 18.77080494 28.86820345c13.07483653 2.84798419 26.02021925-5.56651457 28.86820347-18.77080493 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820347zM526.49882864 815.95758617c-13.46319803 0-24.3373195 10.87412148-24.3373195 24.33731952s10.87412148 24.3373195 24.3373195 24.33731949S550.83614815 853.7581037 550.83614815 840.29490569s-10.87412148-24.3373195-24.33731951-24.33731952zM592.13191902 808.9670795c-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820347s15.66391309 21.48933531 28.86820345 18.77080493c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820345-2.71853037-13.20429037-15.66391309-21.48933531-28.86820345-18.77080495zM655.04647902 788.64282864c-12.29811358 5.43706075-17.73517431 19.80643555-12.29811359 32.10454914 5.43706075 12.29811358 19.80643555 17.73517431 32.10454914 12.29811358 12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454914-5.56651457-12.29811358-19.93588939-17.86462815-32.10454913-12.29811358zM712.26507061 755.50264889c-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272s23.04278124 13.33374419 33.91690272 5.43706074c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690272s-23.04278124-13.33374419-33.91690272-5.43706074zM761.32807111 711.35889383c-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.3052642 9.96794469 8.93231408 25.37295013 8.15559111 34.3052642-1.81235358 8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235358zM833.30439902 648.96214914c-11.65084445-6.73159902-26.53803457-2.71853037-33.26963359 8.93231406-6.73159902 11.65084445-2.71853037 26.53803457 8.93231407 33.2696336 11.65084445 6.73159902 26.53803457 2.71853037 33.26963359-8.93231408 6.73159902-11.65084445 2.71853037-26.53803457-8.93231407-33.26963358zM857.64171852 581.90506667c-12.81592889-4.14252247-26.53803457 2.84798419-30.68055704 15.66391308-4.14252247 12.81592889 2.84798419 26.53803457 15.66391309 30.68055705 12.81592889 4.14252247 26.53803457-2.84798419 30.68055704-15.6639131 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055703zM867.48020939 511.35273086c-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.33374419 8.28504494 25.37295013 21.61878915 26.66748839 13.33374419 1.4239921 25.37295013-8.28504494 26.66748839-21.61878914 1.4239921-13.33374419-8.28504494-25.2434963-21.61878913-26.66748839zM840.68326717 466.95006815c1.4239921 13.33374419 13.33374419 23.04278124 26.66748838 21.61878913s23.04278124-13.33374419 21.61878914-26.66748839c-1.4239921-13.33374419-13.33374419-23.04278124-26.66748839-21.61878914-13.33374419 1.29453827-22.91332741 13.20429037-21.61878913 26.6674884zM826.96116148 402.22315457c4.14252247 12.81592889 17.86462815 19.80643555 30.68055704 15.66391308 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055704-4.14252247-12.81592889-17.86462815-19.80643555-30.68055704-15.66391308-12.81592889 4.2719763-19.80643555 17.99408197-15.66391309 30.68055704zM800.16421925 341.89767111c6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231407 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.26963357-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231408-11.65084445 6.86105283-15.66391309 21.61878914-8.93231408 33.26963358zM795.63333531 290.24559408c9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.30526421-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235357-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 10.09739852 24.3373195 10.87412148 34.3052642 1.81235358zM746.18197333 238.85242469c7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706075-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690271 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074zM655.04647902 211.2787595c12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.43706075-12.29811358 0-26.66748839-12.29811358-32.10454912-12.29811358-5.43706075-26.66748839 0-32.10454914 12.29811357-5.56651457 12.29811358 0 26.66748839 12.29811359 32.10454913zM592.13191902 190.82505482c13.07483653 2.84798419 26.02021925-5.56651457 28.86820345-18.77080495 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820345s-26.02021925 5.56651457-28.86820345 18.77080494c-2.71853037 13.20429037 5.69596839 26.14967309 18.77080494 28.86820346z" fill="#808080"></path></svg>
      </span>
      <span class="menu-toggle-icon" v-else>
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" style="width: 1em; height: 1em; vertical-align: middle; fill: currentcolor; overflow: hidden;">
          <line 
            x1="100" y1="100"
            x2="924" y2="924"
            stroke="#808080" 
            stroke-width="40"
            stroke-linecap="round"
            stroke-opacity="1"
            data-v-7a7a37b1=""
          ></line>
          <path d="M526.49882864 364.2931832c-74.8243121 0-135.66761086 60.84329876-135.66761086 135.66761088s60.84329876 135.66761086 135.66761086 135.66761086S662.1664395 574.78510617 662.1664395 499.96079408s-60.97275259-135.66761086-135.66761086-135.66761088z m0 211.78646125c-41.94304 0-76.11885037-34.17581037-76.11885037-76.11885037s34.17581037-76.11885037 76.11885037-76.11885038 76.11885037 34.17581037 76.11885038 76.11885038-34.17581037 76.11885037-76.11885038 76.11885037z" fill="#808080"></path>
          <path d="M526.49882864 239.88805531c-143.4348405 0-260.07273876 116.63789827-260.07273877 260.07273877s116.63789827 260.07273876 260.07273877 260.07273875 260.07273876-116.63789827 260.07273877-260.07273875S669.93366914 239.88805531 526.49882864 239.88805531z m0 480.53260642c-121.5571437 0-220.45986765-98.90272395-220.45986766-220.45986765s98.90272395-220.45986765 220.45986766-220.45986766 220.45986765 98.90272395 220.45986766 220.45986766S648.05597235 720.42066173 526.49882864 720.42066173zM526.49882864 183.96400197c13.46319803 0 24.3373195-10.87412148 24.33731951-24.3373195s-10.87412148-24.3373195-24.33731951-24.3373195-24.3373195 10.87412148-24.3373195 24.3373195 10.87412148 24.3373195 24.3373195 24.3373195zM460.73628445 190.82505482c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820346-2.84798419-13.07483653-15.66391309-21.48933531-28.86820347-18.77080494-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820345s15.79336691 21.61878914 28.86820347 18.77080495zM397.95117827 211.2787595c12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454913-5.43706075-12.29811358-19.80643555-17.73517431-32.10454913-12.29811357-12.29811358 5.43706075-17.73517431 19.80643555-12.29811358 32.10454912 5.43706075 12.16865975 19.80643555 17.73517431 32.10454913 12.29811358zM340.73258667 244.28948543c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690271-7.89668347-10.87412148-23.04278124-13.33374419-33.91690272-5.43706075-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272 7.89668347 10.87412148 23.04278124 13.33374419 33.91690272 5.43706074zM291.66958617 288.4332405c8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235357-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.30526421 9.96794469 9.0617679 25.37295013 8.28504494 34.3052642-1.81235358zM219.56380445 350.82998518c11.65084445 6.73159902 26.53803457 2.71853037 33.26963358-8.93231407 6.73159902-11.65084445 2.71853037-26.53803457-8.93231408-33.26963358-11.65084445-6.73159902-26.53803457-2.71853037-33.26963358 8.93231408-6.60214518 11.65084445-2.58907653 26.53803457 8.93231408 33.26963357zM195.35593876 417.88706765c12.81592889 4.14252247 26.53803457-2.84798419 30.68055705-15.66391308 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055704-12.81592889-4.14252247-26.53803457 2.84798419-30.68055703 15.66391308-4.14252247 12.81592889 2.84798419 26.53803457 15.66391307 30.68055704zM185.5174479 488.56885728c13.33374419 1.4239921 25.37295013-8.28504494 26.6674884-21.61878913 1.4239921-13.33374419-8.28504494-25.37295013-21.61878913-26.6674884-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.20429037 8.28504494 25.2434963 21.61878914 26.66748839zM212.1849363 532.97152c-1.4239921-13.33374419-13.33374419-23.04278124-26.6674884-21.61878914-13.33374419 1.4239921-23.04278124 13.33374419-21.61878914 26.66748839 1.4239921 13.33374419 13.33374419 23.04278124 26.66748841 21.61878914 13.33374419-1.4239921 23.04278124-13.33374419 21.61878913-26.66748839zM226.03649581 597.56897975c-4.14252247-12.81592889-17.86462815-19.80643555-30.68055705-15.66391308-12.81592889 4.14252247-19.80643555 17.86462815-15.66391307 30.68055703 4.14252247 12.81592889 17.86462815 19.80643555 30.68055703 15.6639131 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055705zM252.83343803 657.8944632c-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231406-11.65084445 6.73159902-15.66391309 21.61878914-8.93231408 33.26963358 6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231408 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.2696336zM257.36432197 709.54654025c-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 9.96794469 24.3373195 10.74466765 34.3052642 1.81235358 9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.3052642-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235358zM306.81568395 760.93970963c-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690272 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074 7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706074zM397.95117827 788.64282864c-12.29811358-5.43706075-26.66748839 0-32.10454913 12.29811358-5.43706075 12.29811358 0 26.66748839 12.29811358 32.10454914 12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.56651457-12.29811358 0-26.66748839-12.29811358-32.10454914zM460.73628445 808.9670795c-13.07483653-2.84798419-26.02021925 5.56651457-28.86820347 18.77080495s5.56651457 26.02021925 18.77080494 28.86820345c13.07483653 2.84798419 26.02021925-5.56651457 28.86820347-18.77080493 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820347zM526.49882864 815.95758617c-13.46319803 0-24.3373195 10.87412148-24.3373195 24.33731952s10.87412148 24.3373195 24.3373195 24.33731949S550.83614815 853.7581037 550.83614815 840.29490569s-10.87412148-24.3373195-24.33731951-24.33731952zM592.13191902 808.9670795c-13.07483653 2.84798419-21.48933531 15.66391309-18.77080494 28.86820347s15.66391309 21.48933531 28.86820345 18.77080493c13.07483653-2.84798419 21.48933531-15.66391309 18.77080494-28.86820345-2.71853037-13.20429037-15.66391309-21.48933531-28.86820345-18.77080495zM655.04647902 788.64282864c-12.29811358 5.43706075-17.73517431 19.80643555-12.29811359 32.10454914 5.43706075 12.29811358 19.80643555 17.73517431 32.10454914 12.29811358 12.29811358-5.43706075 17.73517431-19.80643555 12.29811358-32.10454914-5.56651457-12.29811358-19.93588939-17.86462815-32.10454913-12.29811358zM712.26507061 755.50264889c-10.87412148 7.89668347-13.33374419 23.04278124-5.43706074 33.91690272s23.04278124 13.33374419 33.91690272 5.43706074c10.87412148-7.89668347 13.33374419-23.04278124 5.43706074-33.91690272s-23.04278124-13.33374419-33.91690272-5.43706074zM761.32807111 711.35889383c-8.93231408 9.96794469-8.15559111 25.37295013 1.81235358 34.3052642 9.96794469 8.93231408 25.37295013 8.15559111 34.3052642-1.81235358 8.93231408-9.96794469 8.15559111-25.37295013-1.81235358-34.3052642-9.96794469-8.93231408-25.37295013-8.15559111-34.3052642 1.81235358zM833.30439902 648.96214914c-11.65084445-6.73159902-26.53803457-2.71853037-33.26963359 8.93231406-6.73159902 11.65084445-2.71853037 26.53803457 8.93231407 33.2696336 11.65084445 6.73159902 26.53803457 2.71853037 33.26963359-8.93231408 6.73159902-11.65084445 2.71853037-26.53803457-8.93231407-33.26963358zM857.64171852 581.90506667c-12.81592889-4.14252247-26.53803457 2.84798419-30.68055704 15.66391308-4.14252247-12.81592889 2.84798419-26.53803457 15.66391309 30.68055705 12.81592889 4.14252247 26.53803457-2.84798419 30.68055704-15.6639131 4.14252247-12.81592889-2.84798419-26.53803457-15.66391309-30.68055703zM867.48020939 511.35273086c-13.33374419-1.4239921-25.37295013 8.28504494-26.66748841 21.61878914-1.4239921 13.33374419 8.28504494 25.37295013 21.61878915 26.66748839 13.33374419 1.4239921 25.37295013-8.28504494 26.66748839-21.61878914 1.4239921-13.33374419-8.28504494-25.2434963-21.61878913-26.66748839zM840.68326717 466.95006815c1.4239921 13.33374419 13.33374419 23.04278124 26.66748838 21.61878913s23.04278124-13.33374419 21.61878914-26.66748839c-1.4239921-13.33374419-13.33374419-23.04278124-26.66748839-21.61878914-13.33374419 1.29453827-22.91332741 13.20429037-21.61878913 26.6674884zM826.96116148 402.22315457c4.14252247 12.81592889 17.86462815 19.80643555 30.68055704 15.66391308 12.81592889-4.14252247 19.80643555-17.86462815 15.66391309-30.68055704-4.14252247-12.81592889-17.86462815-19.80643555-30.68055704-15.66391308-12.81592889 4.2719763-19.80643555 17.99408197-15.66391309 30.68055704zM800.16421925 341.89767111c6.73159902 11.65084445 21.61878914 15.66391309 33.26963358 8.93231407 11.65084445-6.73159902 15.66391309-21.61878914 8.93231408-33.26963357-6.73159902-11.65084445-21.61878914-15.66391309-33.26963358-8.93231408-11.65084445 6.86105283-15.66391309 21.61878914-8.93231408 33.26963358zM795.63333531 290.24559408c9.96794469-8.93231408 10.74466765-24.3373195 1.81235358-34.30526421-8.93231408-9.96794469-24.3373195-10.74466765-34.3052642-1.81235357-9.96794469 8.93231408-10.74466765 24.3373195-1.81235358 34.3052642 8.93231408 10.09739852 24.3373195 10.87412148 34.3052642 1.81235358zM746.18197333 238.85242469c7.89668347-10.87412148 5.43706075-26.02021925-5.43706074-33.91690272-10.87412148-7.89668347-26.02021925-5.43706075-33.91690272 5.43706075-7.89668347 10.87412148-5.43706075 26.02021925 5.43706074 33.91690271 10.87412148 7.89668347 26.02021925 5.43706075 33.91690272-5.43706074zM655.04647902 211.2787595c12.29811358 5.43706075 26.66748839 0 32.10454913-12.29811358 5.43706075-12.29811358 0-26.66748839-12.29811358-32.10454912-12.29811358-5.43706075-26.66748839 0-32.10454914 12.29811357-5.56651457 12.29811358 0 26.66748839 12.29811359 32.10454913zM592.13191902 190.82505482c13.07483653 2.84798419 26.02021925-5.56651457 28.86820345-18.77080495 2.84798419-13.07483653-5.56651457-26.02021925-18.77080494-28.86820345s-26.02021925 5.56651457-28.86820345 18.77080494c-2.71853037 13.20429037 5.69596839 26.14967309 18.77080494 28.86820346z" fill="#808080"></path>
        </svg>
      </span>
      {{ isAutoPlayEnabled ? "关闭自动播放" : "开启自动播放" }}
    </div>
    <div @click="replayCurrentMedia" class="menu-item">
      <span class="menu-toggle-icon">
        <svg class="icon" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512.042667 139.861333a370.944 370.944 0 0 0-267.52 113.493334 30.805333 30.805333 0 0 0 44.330666 42.794666A310.485333 310.485333 0 0 1 822.528 512a310.485333 310.485333 0 1 1-620.928 0 30.805333 30.805333 0 0 0-61.610667 0 372.096 372.096 0 1 0 744.106667 0 372.096 372.096 0 0 0-372.053333-372.138667z" fill="#808080"></path><path d="M379.733333 325.12a30.805333 30.805333 0 0 1-25.770666 30.378667l-5.034667 0.426666H215.893333a30.805333 30.805333 0 0 1-30.378666-25.813333l-0.426667-4.992V192a30.805333 30.805333 0 0 1 61.226667-4.992l0.426666 4.992v102.272h102.229334c15.36 0 28.032 11.221333 30.421333 25.856l0.426667 4.992z" fill="#808080"></path><path d="M632.746667 546.986667l-138.965334 97.237333a42.666667 42.666667 0 0 1-67.114666-34.986667V414.762667a42.666667 42.666667 0 0 1 67.114666-34.986667l138.965334 97.28a42.666667 42.666667 0 0 1 0 69.888z" fill="#808080"></path></svg>
      </span>
      重播
    </div>
  </div>
</template>

<style scoped>
.main-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content:center;
  align-items: center;
  overflow: hidden;
  background-color: #fff; 
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: background-color 0.4s ease;
}
.text-top {
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  font-size: 3rem;
  font-weight: bold;
  padding: 0;
  flex-shrink: 0;
  font-family: HFont;
  color: #d84e47;
}
.text-bottom {
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  font-size: 3rem;
  font-weight: bold;
  padding: 0;
  flex-shrink: 0;
  font-family: HFont;
  color: #d84e47;
}

.my-swiper {
  width: 100%;
  flex-shrink: 0;
}

.my-swiper :deep(.swiper-wrapper) {
  /* height: 100%; */
}

.my-swiper :deep(.swiper-slide) {
  display: flex;
  justify-content: center;
  align-items: center;
  /* height: 100%; */
  width: 100%;
}

.my-swiper :deep(.swiper-pagination) {
  bottom: calc(1rem + env(safe-area-inset-bottom));
  --swiper-pagination-bullet-size: 0.7rem; 
  --swiper-pagination-bullet-inactive-opacity: 0.5;
  --swiper-pagination-bullet-active-opacity: 1;
  --swiper-pagination-color: white;
}

.main-container1 {
  background-color: #fce1e4; 
}
.main-container2 {
  background-color: #e3c28b; 
}

.media-item {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain; 
  object-position: center; 
}
.foreground-media1 {
  background-color: #fce1e4;
}
.dot-container {
  position: absolute;
  bottom: calc(20px + env(safe-area-inset-bottom));
  left: 50%;
  transform: translateX(-50%);
  height: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  z-index: 10;
}

.dot-item {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: all 0.3s ease;
}

.dot-item.active {
  background-color: white;
  transform: scale(1.2);
}

.menu-toggle {
  position: absolute;
  bottom: calc(20px + env(safe-area-inset-bottom));
  left: calc(20px + env(safe-area-inset-left));
  background-color: rgba(255, 255, 255, 0.6);
  color: white;
  border-radius: 10px;
  height: 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  z-index: 10;
}

.menu-toggle-control {
  font-weight: 500;
  font-size: 14px;
  padding: 0 2px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

.menu-toggle-control:focus,
.menu-toggle-control:active {
  background-color: rgba(255, 255, 255, 0.6) !important;
  outline: none;
}

.menu-toggle-icon {
  font-size: 16px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.menu-toggle-text {
  margin: 0 5px;
  font-size: 14px;
  color: #000;
}

.menu {
  position: absolute;
  bottom: calc(55px + env(safe-area-inset-bottom));
  left: calc(20px + env(safe-area-inset-left));
  background-color: rgba(255, 255, 255, 0.5);
  color: gray;
  border-radius: 10px;
  padding: 5px 0;
  width: 130px;
  z-index: 10;
  backdrop-filter: blur(10px);
  opacity: 0;
  visibility: hidden;
  transform: translateY(10px);
  transition: all 0.3s ease;
}

.menu.open {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.menu-item {
  padding: 8px 5px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}

.menu-item:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

@media (min-width: 1200px) {
  .main-container {
    flex-direction: row;
    justify-content: space-around;
  }
  .my-swiper {
    flex: 1;
  }
}

@media (min-width: 768px) and (max-width: 1199px) {
  .main-container {
    flex-direction: row;
    justify-content: space-around;
  }
  .my-swiper {
    flex: 1;
  }
}

@media (max-width: 767px) {
  .main-container {
    flex-direction: column;
  }
}
</style>
